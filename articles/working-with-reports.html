<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with Reports • salesforcer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Working with Reports">
<meta property="og:description" content="salesforcer">
<meta property="og:image" content="https://stevenmmortimer.github.io/salesforcer/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">salesforcer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/supported-queries.html">Supported Queries</a>
    </li>
    <li>
      <a href="../articles/working-with-bulk-apis.html">Working with Bulk APIs</a>
    </li>
    <li>
      <a href="../articles/working-with-reports.html">Working with Reports</a>
    </li>
    <li>
      <a href="../articles/working-with-attachments.html">Working with Attachments</a>
    </li>
    <li>
      <a href="../articles/working-with-metadata.html">Working with Metadata</a>
    </li>
    <li>
      <a href="../articles/passing-control-args.html">Passing Control Args</a>
    </li>
    <li>
      <a href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/StevenMMortimer/salesforcer">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="working-with-reports_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Working with Reports</h1>
                        <h4 class="author">Steven M. Mortimer</h4>
            
            <h4 class="date">2020-07-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/master/vignettes/working-with-reports.Rmd"><code>vignettes/working-with-reports.Rmd</code></a></small>
      <div class="hidden name"><code>working-with-reports.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The following vignette outlines how to execute and manage reports in your Org. <strong>Note</strong>: These features are still experimental and are likely to change and/or have bugs. Please take this into account, and if you run into any issues please consider submitting an issue <a href="https://github.com/StevenMMortimer/salesforcer/issues/new?assignees=StevenMMortimer&amp;labels=&amp;template=default-issue-template.md&amp;title=">HERE</a> in the GitHub repository so that we can help troubleshoot and fix, if needed. Thank you!</p>
<p>In order to pull down the results of a report created within Salesforce all you need to know and have is the report’s Salesforce Id. If you want to fully leverage the features of the Reports and Dashboards REST API I recommend reading the following so that you are better equipped to understand and use the functions within {salesforcer}.</p>
<ul>
<li>
<a target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm">Running a Report Synchronously or Asynchronously</a><br>
</li>
<li>
<a target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_factmap_example.htm">Understanding a Report Fact Map</a><br>
</li>
<li>
<a target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_filter_reportdata.htm#example_requestbody_execute_resource">Filter Reports on Demand</a><br>
</li>
<li><a target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_intro.htm">Reports and Dashboards REST API Documentation Home Page</a></li>
</ul>
<hr>
</div>
<div id="authenticate" class="section level2">
<h2 class="hasAnchor">
<a href="#authenticate" class="anchor"></a>Authenticate</h2>
<p>First, load the {salesforcer} package and login either by OAuth 2.0 (SSO) or using your username, password, and security key.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>, warn.conflicts = <span class="fl">FALSE</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/StevenMMortimer/salesforcer">salesforcer</a></span>)
<span class="fu"><a href="../reference/sf_auth.html">sf_auth</a></span>()
</pre></div>
</div>
<div id="running-a-report-in-your-org" class="section level2">
<h2 class="hasAnchor">
<a href="#running-a-report-in-your-org" class="anchor"></a>Running a Report in your Org</h2>
<p>In Salesforce there is a dedicated page to displaying the list of reports in your Org. It typically follows the pattern: <code>https://na1.salesforce.com/00O/o</code> (replace <code>na1</code> with your server instance). When you click on a report in the GUI you should see the results. Below is a screenshot of how a report may look in your Org. Note the report Id in the URL bar.</p>
<p><img src="working-with-reports_files/report-screenshot.png"></p>
<p>The report Id above (<code>"00O3s000006tE7zEAE"</code>) is the only information needed to pull those same results from an R session, like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">my_report_id</span> <span class="op">&lt;-</span> <span class="st">"00O3s000006tE7zEAE"</span>
<span class="kw">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_run_report.html">sf_run_report</a></span>(<span class="kw">my_report_id</span>)
<span class="kw">results</span>
<span class="co">#&gt; # A tibble: 14 x 8</span>
<span class="co">#&gt;   `Contact ID` `First Name` `test number` `Contact Owner` `Account ID`</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;       </span>
<span class="co">#&gt; 1 0036A000002… Rose                    NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 2 0036A000002… Sean                    NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 3 0036A000002… Jack                    99 Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 4 0036A000002… Tim                     NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 5 0036A000002… John                    23 Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; # … with 9 more rows, and 3 more variables: `Account Name` &lt;chr&gt;, `Billing</span>
<span class="co">#&gt; #   City` &lt;chr&gt;, `Account Owner` &lt;chr&gt;</span>
</pre></div>
<p>Note that the <code><a href="../reference/sf_run_report.html">sf_run_report()</a></code> function will, by default, run the report asynchronously. This means that a report instance will be requested and then the function will wait to retrieve the results. The advantage to using an asynchronous report is that the results of such a report are stored for 24 hours and can be retrieved again saving CPU resources, if needed. A more in-depth discussion on synchronous vs. asynchronous reports is available here <a target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm">https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm</a>. However, for reports with a relatively small number of records a synchronous report may be faster without having to do the round trip of creating then querying a report instance.</p>
</div>
<div id="filtering-a-report-on-the-fly" class="section level2">
<h2 class="hasAnchor">
<a href="#filtering-a-report-on-the-fly" class="anchor"></a>Filtering a Report on the Fly</h2>
<p>The neat thing about using the API is that you can retrieve the results of a report with different filters applied. This allows you to obtain exactly the results needed without having to create separate copies of the same report. It takes some basic understanding of how report operators need to be supplied to the API, but it is not too difficult. Below is an example that only includes contact records created prior to this month and belong to an Account with a non-NULL Billing City.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># filter records that was created before this month</span>
<span class="kw">filter1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(column = <span class="st">"CREATED_DATE"</span>,
                        operator = <span class="st">"lessThan"</span>, 
                        value = <span class="st">"THIS_MONTH"</span>)

<span class="co"># filter records where the account billing address city is not empty</span>
<span class="kw">filter2</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(column = <span class="st">"ACCOUNT.ADDRESS1_CITY"</span>,
                        operator = <span class="st">"notEqual"</span>, 
                        value = <span class="st">""</span>)

<span class="co"># combine filter1 and filter2 using 'AND' which means that records must meet both filters</span>
<span class="kw">results_using_AND</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_run_report.html">sf_run_report</a></span>(<span class="kw">my_report_id</span>, 
                                   report_boolean_logic = <span class="st">"1 AND 2"</span>,
                                   report_filters = <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">filter1</span>, <span class="kw">filter2</span>))
<span class="kw">results_using_AND</span>
<span class="co">#&gt; # A tibble: 14 x 8</span>
<span class="co">#&gt;   `Contact ID` `First Name` `test number` `Contact Owner` `Account ID`</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;       </span>
<span class="co">#&gt; 1 0036A000002… Rose                    NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 2 0036A000002… Sean                    NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 3 0036A000002… Jack                    99 Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 4 0036A000002… Tim                     NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 5 0036A000002… John                    23 Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; # … with 9 more rows, and 3 more variables: `Account Name` &lt;chr&gt;, `Billing</span>
<span class="co">#&gt; #   City` &lt;chr&gt;, `Account Owner` &lt;chr&gt;</span>
</pre></div>
<p>This second example shows how to return only the Top N number of records and combine the filter using the logical “OR” instead of “AND”.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co"># combine filter1 and filter2 using 'OR' which means that records must meet one </span>
<span class="co"># of the filters but also throw in a row limit based on a specific sort order</span>
<span class="kw">results_using_OR</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_run_report.html">sf_run_report</a></span>(<span class="kw">my_report_id</span>, 
                                  report_boolean_logic = <span class="st">"1 OR 2"</span>,
                                  report_filters = <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">filter1</span>, <span class="kw">filter2</span>), 
                                  sort_by = <span class="st">"Contact.test_number__c"</span>, 
                                  decreasing = <span class="fl">TRUE</span>, 
                                  top_n = <span class="fl">5</span>)
<span class="kw">results_using_OR</span>
<span class="co">#&gt; # A tibble: 5 x 8</span>
<span class="co">#&gt;   `Contact ID` `First Name` `test number` `Contact Owner` `Account ID`</span>
<span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;       </span>
<span class="co">#&gt; 1 0036A000002… Jack                    99 Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 2 0036A000002… John                    23 Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 3 0036A000002… Sean                    NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 4 0036A000002… Tim                     NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; 5 0036A000002… Rose                    NA Steven Mortimer 0016A000003…</span>
<span class="co">#&gt; # … with 3 more variables: `Account Name` &lt;chr&gt;, `Billing City` &lt;chr&gt;, `Account</span>
<span class="co">#&gt; #   Owner` &lt;chr&gt;</span>
</pre></div>
<p>I was able to determine some of the potential ways to filter by first reviewing the <code>reportFilters</code> element in the existing report metadata and also reviewing the list of report filter operators.</p>
<p>First, you can always take the report filter specification from the report metadata and tailor it to your needs. Below is an example showing how to get that metadata for our report. You can select specific elements to better understand the structure of the report.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">report_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_describe_report.html">sf_describe_report</a></span>(<span class="kw">my_report_id</span>)
<span class="kw">report_details</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">reportType</span><span class="op">$</span><span class="kw">type</span>
<span class="co">#&gt; [1] "ContactList"</span>
<span class="kw">report_details</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">reportFilters</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [[1]]$column</span>
<span class="co">#&gt; [1] "CREATED_DATE"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$filterType</span>
<span class="co">#&gt; [1] "fieldValue"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$isRunPageEditable</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$operator</span>
<span class="co">#&gt; [1] "lessThan"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$value</span>
<span class="co">#&gt; [1] "2019-07-19T04:00:00Z"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [[2]]$column</span>
<span class="co">#&gt; [1] "ACCOUNT.ADDRESS1_CITY"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$filterType</span>
<span class="co">#&gt; [1] "fieldValue"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$isRunPageEditable</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$operator</span>
<span class="co">#&gt; [1] "notEqual"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$value</span>
<span class="co">#&gt; [1] ""</span>
</pre></div>
<p>Second, Salesforce has a few API endpoints that tell you the fields on the report or the report type, more generally, and all the ways you can declare a filter on a particular field type and. The <code>reportTypeMetadata</code> element returned on the report description also has detailed information on how to filter the report. For example, it already contains the start and end dates that would be applied when using the “LAST_MONTH” filter value on a date field.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">report_details</span><span class="op">$</span><span class="kw">reportTypeMetadata</span><span class="op">$</span><span class="kw">standardDateFilterDurationGroups</span>[[<span class="fl">6</span>]]<span class="op">$</span><span class="kw">standardDateFilterDurations</span>[[<span class="fl">1</span>]]
<span class="co">#&gt; $endDate</span>
<span class="co">#&gt; [1] "2020-06-30"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $label</span>
<span class="co">#&gt; [1] "Last Month"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $startDate</span>
<span class="co">#&gt; [1] "2020-06-01"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $value</span>
<span class="co">#&gt; [1] "LAST_MONTH"</span>
</pre></div>
<p>Digging into the metadata of the report will allow you to better understand what filters you can set when filtering on the fly. In the example below you should notice that the field names on the report do not match the names of the typical API field names for the object, so please review carefully the fields on the report. For example, the <code>CREATED_DATE</code> report field is based on the <code>CreatedDate</code> object field.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="co"># report fields</span>
<span class="kw">report_fields</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_list_report_fields.html">sf_list_report_fields</a></span>(<span class="kw">my_report_id</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="kw">report_fields</span><span class="op">$</span><span class="kw">equivalentFieldIndices</span>))
<span class="co">#&gt; [1] "CONTACT_CREATED_ALIAS"     "Contact.My_External_Id__c"</span>
<span class="co">#&gt; [3] "IS_EMAIL_BOUNCED"          "REPORTS_TO"               </span>
<span class="co">#&gt; [5] "ADDRESS2_ZIP"              "LAST_ACTIVITY"</span>

<span class="kw">report_filters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_list_report_filter_operators.html">sf_list_report_filter_operators</a></span>()
<span class="kw">unique_supported_fields</span> <span class="op">&lt;-</span> <span class="kw">report_filters</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(<span class="kw">supported_field_type</span>) <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span>()
<span class="kw">unique_supported_fields</span>
<span class="co">#&gt;        supported_field_type1        supported_field_type2 </span>
<span class="co">#&gt;                       "date"                    "address" </span>
<span class="co">#&gt;        supported_field_type3        supported_field_type4 </span>
<span class="co">#&gt;                     "string"                     "double" </span>
<span class="co">#&gt;        supported_field_type5        supported_field_type6 </span>
<span class="co">#&gt;                   "picklist"                   "textarea" </span>
<span class="co">#&gt;        supported_field_type7        supported_field_type8 </span>
<span class="co">#&gt;            "encryptedstring"                    "percent" </span>
<span class="co">#&gt;        supported_field_type9       supported_field_type10 </span>
<span class="co">#&gt;                        "int"                        "url" </span>
<span class="co">#&gt;       supported_field_type11       supported_field_type12 </span>
<span class="co">#&gt;                  "reference"                   "datetime" </span>
<span class="co">#&gt;       supported_field_type13       supported_field_type14 </span>
<span class="co">#&gt;                    "boolean"                      "phone" </span>
<span class="co">#&gt;       supported_field_type15       supported_field_type16 </span>
<span class="co">#&gt; "datacategorygroupreference"                   "currency" </span>
<span class="co">#&gt;       supported_field_type17       supported_field_type18 </span>
<span class="co">#&gt;                   "location"                       "html" </span>
<span class="co">#&gt;       supported_field_type19       supported_field_type20 </span>
<span class="co">#&gt;                         "id"                       "time" </span>
<span class="co">#&gt;       supported_field_type21       supported_field_type22 </span>
<span class="co">#&gt;                      "email"              "multipicklist"</span>

<span class="co"># operators to filter a picklist field</span>
<span class="kw">picklist_field_operators</span> <span class="op">&lt;-</span> <span class="kw">report_filters</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">supported_field_type</span> <span class="op">==</span> <span class="st">"picklist"</span>)
<span class="kw">picklist_field_operators</span>
<span class="co">#&gt; # A tibble: 9 x 3</span>
<span class="co">#&gt;   supported_field_type label         name       </span>
<span class="co">#&gt;   &lt;chr&gt;                &lt;chr&gt;         &lt;chr&gt;      </span>
<span class="co">#&gt; 1 picklist             equals        equals     </span>
<span class="co">#&gt; 2 picklist             not equal to  notEqual   </span>
<span class="co">#&gt; 3 picklist             less than     lessThan   </span>
<span class="co">#&gt; 4 picklist             greater than  greaterThan</span>
<span class="co">#&gt; 5 picklist             less or equal lessOrEqual</span>
<span class="co">#&gt; # … with 4 more rows</span>
</pre></div>
</div>
<div id="managing-your-reports" class="section level2">
<h2 class="hasAnchor">
<a href="#managing-your-reports" class="anchor"></a>Managing your Reports</h2>
<p>The API also allows you to perform many admin functions like creating, copying, updating, or deleting reports and report instances. Take advantage of these functions as needed to keep your Org’s report list well-maintained. Below is a simple flow of creating, updating, and deleting a single report, but the amount you’re able to customize is completely up to you. The {salesforcer} package should support any operation that the Reports and Dashboards REST API supports.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="co"># first, grab all possible reports in your Org</span>
<span class="kw">all_reports</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_query.html">sf_query</a></span>(<span class="st">"SELECT Id, Name FROM Report"</span>)

<span class="co"># second, get the id of the report to update</span>
<span class="kw">this_report_id</span> <span class="op">&lt;-</span> <span class="kw">all_reports</span><span class="op">$</span><span class="kw">Id</span>[<span class="fl">1</span>]

<span class="kw">new_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_copy_report.html">sf_copy_report</a></span>(<span class="kw">this_report_id</span>)
<span class="co">#&gt; Naming the new report: 'KEEP - Accounts and Contacts - Copy'</span>

<span class="co"># third, update the report (2 ways shown)</span>
<span class="kw">my_updated_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_update_report.html">sf_update_report</a></span>(<span class="kw">new_report</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">id</span>,
                                      report_metadata =
                                        <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(reportMetadata =
                                          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(name = <span class="st">"Updated Name!"</span>)))
<span class="kw">my_updated_report</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">name</span>
<span class="co">#&gt; [1] "Updated Name!"</span>

<span class="co"># alternatively, pull down its metadata and update the name</span>
<span class="kw">report_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_describe_report.html">sf_describe_report</a></span>(<span class="kw">new_report</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">id</span>)
<span class="kw">report_details</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw">report_details</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">name</span>,
                                             <span class="st">" - UPDATED AGAIN!"</span>)

<span class="co"># update the report by passing the metadata</span>
<span class="kw">my_updated_report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_update_report.html">sf_update_report</a></span>(<span class="kw">new_report</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">id</span>,
                                      report_metadata = <span class="kw">report_details</span>)
<span class="kw">my_updated_report</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">name</span>
<span class="co">#&gt; [1] "Updated Name! - UPDATED AGAIN!"</span>

<span class="co"># fourth, delete that report using its Id</span>
<span class="kw">success</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_delete_report.html">sf_delete_report</a></span>(<span class="kw">new_report</span><span class="op">$</span><span class="kw">reportMetadata</span><span class="op">$</span><span class="kw">id</span>)
<span class="kw">success</span>
<span class="co">#&gt; [1] TRUE</span>
</pre></div>
</div>
<div id="troubleshooting" class="section level2">
<h2 class="hasAnchor">
<a href="#troubleshooting" class="anchor"></a>Troubleshooting</h2>
<p>If you are having an issue with a report please submit in the {salesforcer} GitHub repository at: <a target="_blank" href="https://github.com/StevenMMortimer/salesforcer/issues">https://github.com/StevenMMortimer/salesforcer/issues</a>. As a maintainer, reports can be are tough to debug because every Salesforce Org is unique. When filing your issue please make an attempt to understand the query and debug a little bit on your own. Here are a few suggestions:</p>
<ol style="list-style-type: decimal">
<li>
<p>Slightly modify your function call to <code><a href="../reference/sf_run_report.html">sf_run_report()</a></code> to observe the results. Here are a few prompting questions that may assist you:</p>
<ul>
<li><p>What do you see when you set <code>verbose=TRUE</code> argument?</p></li>
<li><p>What happens if you run sync. vs. async. (e.g. async=TRUE vs. FALSE)?</p></li>
<li><p>What happens if you try running a different type of report?</p></li>
</ul>
</li>
<li><p>Double check Salesforce’s <a target="_blank" href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_intro.htm">Reports and Dashboards REST API Developer Guide</a> to see whether if your report type would be supported or limited in some way.</p></li>
<li><p>Review query unit tests at: <a target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/master/tests/testthat/test-report.R">https://github.com/StevenMMortimer/salesforcer/blob/master/tests/testthat/test-reporty.R</a>. These unit tests were written to cover a variety of use cases and to track any changes made between newly released versions of the Salesforce API (typically 4 each year). These tests are an excellent source of examples that may be helpful in troubleshooting your own case.</p></li>
<li>
<p>Roll up your sleeves and dive into the source code for the {salesforcer} package. The main scripts to review are:</p>
<ul>
<li><p><a target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/master/R/analytics-report.R">https://github.com/StevenMMortimer/salesforcer/blob/master/R/analytics-report.R</a></p></li>
<li><p><a target="_blank" href="https://github.com/StevenMMortimer/salesforcer/blob/master/R/utils-report.R">https://github.com/StevenMMortimer/salesforcer/blob/master/R/utils-report.R</a></p></li>
</ul>
</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c7d5ea1103660127418415a82a24fc3d',
    indexName: 'salesforcer',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
