<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with Attachments • salesforcer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Working with Attachments">
<meta property="og:description" content="salesforcer">
<meta property="og:image" content="https://stevenmmortimer.github.io/salesforcer/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">salesforcer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/supported-queries.html">Supported Queries</a>
    </li>
    <li>
      <a href="../articles/working-with-bulk-apis.html">Working with Bulk APIs</a>
    </li>
    <li>
      <a href="../articles/working-with-reports.html">Working with Reports</a>
    </li>
    <li>
      <a href="../articles/working-with-attachments.html">Working with Attachments</a>
    </li>
    <li>
      <a href="../articles/working-with-metadata.html">Working with Metadata</a>
    </li>
    <li>
      <a href="../articles/passing-control-args.html">Passing Control Args</a>
    </li>
    <li>
      <a href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/StevenMMortimer/salesforcer">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="working-with-attachments_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Working with Attachments</h1>
                        <h4 class="author">Steven M. Mortimer</h4>
            
            <h4 class="date">2020-06-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/master/vignettes/working-with-attachments.Rmd"><code>vignettes/working-with-attachments.Rmd</code></a></small>
      <div class="hidden name"><code>working-with-attachments.Rmd</code></div>

    </div>

    
    
<div id="attachments-in-salesforce" class="section level2">
<h2 class="hasAnchor">
<a href="#attachments-in-salesforce" class="anchor"></a>Attachments in Salesforce</h2>
<p>Almost all records in Salesforce support attachments. Attachments are just blob data storage for an associated ParentId. A ParentId is the 18-character Salesforcer Id of the record that the attachment belongs to. To get started creating and updating attachments, first, load the {salesforcer} and {dplyr} packages and login, if needed.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/krlmlr/here">here</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/StevenMMortimer/salesforcer">salesforcer</a></span>)
<span class="fu"><a href="../reference/sf_auth.html">sf_auth</a></span>()
</pre></div>
<p>The Attachment data, for example, the attachment’s Id, ParentId, Name, Body, ModifiedDate, and other attributes are stored in the Attachment object, a Standard Object in Salesforce.</p>
</div>
<div id="creating-uploading-attachments" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-uploading-attachments" class="anchor"></a>Creating (Uploading) Attachments</h2>
<p>Below we will cover 2 different methods of creating attachments:</p>
<ol style="list-style-type: decimal">
<li>Uploading local files as Attachments one at a time using the SOAP and REST API (most common usage)</li>
<li>Uploading large batches of files using the Bulk API, which zips the files before upload</li>
</ol>
<p><strong>Uploading local files as Attachments (SOAP and REST)</strong></p>
<p>When uploading an attachment stored locally (i.e. on your computer), you can provide an absolute or relative path to the current working directory. If the <code>Name</code> column is omitted, then the name of the attachment as it appears in Salesforce will be the same as the base file name and extension. For example, if the path provided is “/Documents/attachments/doc1.pdf”, then the <code>Name</code> field will be set to “doc1.pdf”. In the sample code below we are leveraging the <strong>here</strong> package to consistently create relative paths. Although, this is not required, it is encouraged to increase the portability of your code.</p>
<p>In the example below, we upload three attachments to two different parent records. Note: Make sure to replace the paths and ParentIds in the example below with file paths that exist on your local machine and Ids of records in your Salesforce org.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="co"># define the ParentIds where the attachments will be shown in Salesforce</span>
<span class="kw">parent_record_id1</span> <span class="op">&lt;-</span> <span class="st">"0016A0000035mJ4"</span>
<span class="kw">parent_record_id2</span> <span class="op">&lt;-</span> <span class="st">"0016A0000035mJ5"</span>

<span class="co"># provide the file paths of where the attachments exist locally on your machine</span>
<span class="co"># in this case we are referencing images included within the salesforcer package, </span>
<span class="co"># but any absolute or relative path locally will work</span>
<span class="kw">file_path1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"cloud.png"</span>, package=<span class="st">"salesforcer"</span>)
<span class="kw">file_path2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"logo.png"</span>, package=<span class="st">"salesforcer"</span>)
<span class="kw">file_path3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"old-logo.png"</span>, package=<span class="st">"salesforcer"</span>)

<span class="co"># create a data.frame or tbl_df out of this information</span>
<span class="kw">attachment_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(Body = <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">file_path1</span>, 
                                          <span class="kw">file_path2</span>, 
                                          <span class="kw">file_path3</span>), 
                                        times=<span class="fl">2</span>),
                             ParentId = <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw">parent_record_id1</span>, 
                                              <span class="kw">parent_record_id2</span>), 
                                            each=<span class="fl">3</span>))

<span class="co"># create the attachments!</span>
<span class="kw">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create_attachment.html">sf_create_attachment</a></span>(<span class="kw">attachment_details</span>)
<span class="kw">result</span>
<span class="co">#&gt; # A tibble: 6 x 2</span>
<span class="co">#&gt;   id                 success</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;  </span>
<span class="co">#&gt; 1 00P3s00000ZgmzcEAB TRUE   </span>
<span class="co">#&gt; 2 00P3s00000Zgn0oEAB TRUE   </span>
<span class="co">#&gt; 3 00P3s00000Zgn7REAR TRUE   </span>
<span class="co">#&gt; 4 00P3s00000Zgn9UEAR TRUE   </span>
<span class="co">#&gt; 5 00P3s00000Zgn9ZEAR TRUE   </span>
<span class="co">#&gt; # … with 1 more row</span>
</pre></div>
</div>
<div id="downloading-attachments" class="section level2">
<h2 class="hasAnchor">
<a href="#downloading-attachments" class="anchor"></a>Downloading Attachments</h2>
<p>After uploading attachments to Salesforce you can download them by first querying the metadata in the Attachment object. This metadata provides the Id for the blob data attachment for download. A convenience function, <code><a href="../reference/sf_download_attachment.html">sf_download_attachment()</a></code>, has been created to download attachments quickly. The example below shows how to query the metadata of attachments belonging to particular ParentId.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># pull down all attachments associated with a particular record</span>
<span class="kw">queried_attachments</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_query.html">sf_query</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span>(<span class="st">"SELECT Id, Body, Name, ParentId
                                         FROM Attachment
                                         WHERE ParentId IN ('%s', '%s')"</span>
                                         FROM Attachment
                                         WHERE ParentId IN ('%s', '%s')", 
                                         <span class="kw">parent_record_id1</span>, <span class="kw">parent_record_id2</span>))
<span class="kw">queried_attachments</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   Id            Body                                     Name      ParentId     </span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;                                    &lt;chr&gt;     &lt;chr&gt;        </span>
<span class="co">#&gt; 1 00P3s00000Zg… /services/data/v48.0/sobjects/Attachmen… old-logo… 0016A0000035…</span>
<span class="co">#&gt; 2 00P3s00000Zg… /services/data/v48.0/sobjects/Attachmen… logo.png  0016A0000035…</span>
<span class="co">#&gt; 3 00P3s00000Zg… /services/data/v48.0/sobjects/Attachmen… cloud.png 0016A0000035…</span>
<span class="co">#&gt; 4 00P3s00000Zg… /services/data/v48.0/sobjects/Attachmen… cloud.png 0016A0000035…</span>
<span class="co">#&gt; 5 00P3s00000Zg… /services/data/v48.0/sobjects/Attachmen… logo.png  0016A0000035…</span>
<span class="co">#&gt; # … with 1 more row</span>
</pre></div>
<p>Before downloading the attachments using the Body it is important to consider whether the attachment names are repeated or duplicates. If so, then the attachments with the same exact name will be overwritten on the local filesystem as they are downloaded. To avoid this problem there are two common strategies:</p>
<ol style="list-style-type: decimal">
<li>Create a new column (e.g. <code>unique_name</code>) that is the concatenation of the Attachment Id and the Attachment’s name which is guaranteed to be unique.</li>
<li>Save the attachments in separate folders for each ParentId record.</li>
</ol>
<p>As long as the same ParentId record doesn’t name attachments with the same name, then Strategy #2 above will work. In addition, it may help better organize the documents if you are planning to download many and then upload again to Salesforce using the Bulk API as demonstrated later in this script.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="co"># create a new folder for each ParentId in the dataset</span>
<span class="kw">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>()
<span class="co">for</span> (<span class="kw">pid</span> <span class="co">in</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span>(<span class="kw">queried_attachments</span><span class="op">$</span><span class="kw">ParentId</span>)){
  <span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw">temp_dir</span>, <span class="kw">pid</span>), showWarnings = <span class="fl">FALSE</span>) <span class="co"># ignore if already exists</span>
}

<span class="co"># create a new columns in the queried data so that we can pass this information </span>
<span class="co"># on to the function `sf_download_attachment()` that will actually perform the download</span>
<span class="kw">queried_attachments</span> <span class="op">&lt;-</span> <span class="kw">queried_attachments</span> <span class="op">%&gt;%</span> 
  <span class="co"># Strategy 1: Unique file names (ununsed here, but shown as an example)</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(unique_name = <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="kw">Id</span>, <span class="kw">Name</span>, sep=<span class="st">'___'</span>)) <span class="op">%&gt;%</span> 
  <span class="co"># Strategy 2: Separate folders per parent</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(Path = <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw">temp_dir</span>, <span class="kw">ParentId</span>))

<span class="co"># download all of the attachments for a single ParentId record to their own folder</span>
<span class="kw">download_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mapply.html">mapply</a></span>(<span class="kw">sf_download_attachment</span>, 
                          <span class="kw">queried_attachments</span><span class="op">$</span><span class="kw">Body</span>, 
                          <span class="kw">queried_attachments</span><span class="op">$</span><span class="kw">Name</span>, 
                          <span class="kw">queried_attachments</span><span class="op">$</span><span class="kw">Path</span>)
<span class="kw">download_result</span>
<span class="co">#&gt; /services/data/v48.0/sobjects/Attachment/00P3s00000Zgn7REAR/Body </span>
<span class="co">#&gt;                                                             TRUE </span>
<span class="co">#&gt; /services/data/v48.0/sobjects/Attachment/00P3s00000Zgn0oEAB/Body </span>
<span class="co">#&gt;                                                             TRUE </span>
<span class="co">#&gt; /services/data/v48.0/sobjects/Attachment/00P3s00000ZgmzcEAB/Body </span>
<span class="co">#&gt;                                                             TRUE </span>
<span class="co">#&gt; /services/data/v48.0/sobjects/Attachment/00P3s00000Zgn9UEAR/Body </span>
<span class="co">#&gt;                                                             TRUE </span>
<span class="co">#&gt; /services/data/v48.0/sobjects/Attachment/00P3s00000Zgn9ZEAR/Body </span>
<span class="co">#&gt;                                                             TRUE </span>
<span class="co">#&gt; /services/data/v48.0/sobjects/Attachment/00P3s00000Zgn3IEAR/Body </span>
<span class="co">#&gt;                                                             TRUE</span>
</pre></div>
<p><strong>Uploading large batches using the Bulk API</strong></p>
<p>The SOAP and REST APIs are good for working with a few attachments at a time. However, the Bulk API can be invoked using api_type=“Bulk 1.0” to automatically take a <code>data.frame</code> or <code>tbl_df</code> of Attachment field data and create a ZIP file with CSV manifest that is required by that API to upload In the example above we downloaded the 3 attachments each belonging to 2 different parent records. Assuming that I have a directory on my computer</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="co"># create the attachment metadata required (Name, Body, ParentId)</span>
<span class="kw">attachment_details</span> <span class="op">&lt;-</span> <span class="kw">queried_attachments</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(Body = <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw">Path</span>, <span class="kw">Name</span>)) <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">Name</span>, <span class="kw">Body</span>, <span class="kw">ParentId</span>) 
</pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create_attachment.html">sf_create_attachment</a></span>(<span class="kw">attachment_details</span>, api_type=<span class="st">"Bulk 1.0"</span>)
<span class="kw">result</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   Id                 Success Created Error</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;   &lt;lgl&gt;   &lt;lgl&gt;</span>
<span class="co">#&gt; 1 00P3s00000Zgn9eEAB TRUE    TRUE    NA   </span>
<span class="co">#&gt; 2 00P3s00000Zgn9fEAB TRUE    TRUE    NA   </span>
<span class="co">#&gt; 3 00P3s00000Zgn9gEAB TRUE    TRUE    NA   </span>
<span class="co">#&gt; 4 00P3s00000Zgn9hEAB TRUE    TRUE    NA   </span>
<span class="co">#&gt; 5 00P3s00000Zgn9iEAB TRUE    TRUE    NA   </span>
<span class="co">#&gt; # … with 1 more row</span>
</pre></div>
</div>
<div id="extending-to-documents-and-other-blob-data" class="section level2">
<h2 class="hasAnchor">
<a href="#extending-to-documents-and-other-blob-data" class="anchor"></a>Extending to Documents and Other Blob Data</h2>
<p>The commands for working with Attachments also work for uploading documents and other blob data as well. Documents are just like Attachments in Salesforce except instead of having an associated ParentId they have an associated FolderId where the blob will be associated with upon creation. Here is a brief example of uploading a PDF (“Document”) to a Folder</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="co"># the function supports inserting all types of blob content, just update the </span>
<span class="co"># object_name argument to add the PDF as a Document instead of an Attachment</span>
<span class="kw">document_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(Name = <span class="st">"Data Wrangling Cheatsheet - Test 1"</span>,
                           Description = <span class="st">"RStudio cheatsheet covering dplyr and tidyr."</span>,
                           Body = <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, 
                                              <span class="st">"data-wrangling-cheatsheet.pdf"</span>,
                                              package=<span class="st">"salesforcer"</span>),
                           FolderId = <span class="st">"00l6A000001EgIwQAK"</span>,
                           Keywords = <span class="st">"test,cheatsheet,document"</span>)
<span class="kw">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create_attachment.html">sf_create_attachment</a></span>(<span class="kw">document_details</span>, object_name = <span class="st">"Document"</span>)
<span class="kw">result</span>
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;   id                 success</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;  </span>
<span class="co">#&gt; 1 0153s000001gZBtAAM TRUE</span>
</pre></div>
<p>With Documents, users are also able to save storage by specifying a <code>Url</code> instead of a a file path where the <code>Body</code> content is stored locally. Specifying the <code>Url</code> field will reference the URL instead of uploading into the Salesforce org, thereby saving space if limited in your organization.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="kw">cheatsheet_url</span> <span class="op">&lt;-</span> <span class="st">"https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf"</span>
<span class="kw">document_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(Name = <span class="st">"Data Wrangling Cheatsheet - Test 2"</span>,
                           Description = <span class="st">"RStudio cheatsheet covering dplyr and tidyr."</span>,
                           Url = <span class="kw">cheatsheet_url</span>,  
                           FolderId = <span class="st">"00l6A000001EgIwQAK"</span>,
                           Keywords = <span class="st">"test,cheatsheet,document"</span>)
<span class="kw">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create_attachment.html">sf_create_attachment</a></span>(<span class="kw">document_details</span>, object_name = <span class="st">"Document"</span>)
<span class="kw">result</span>
<span class="co">#&gt; # A tibble: 1 x 2</span>
<span class="co">#&gt;   id                 success</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;  </span>
<span class="co">#&gt; 1 0153s000001gZByAAM TRUE</span>
</pre></div>
</div>
<div id="reference-links" class="section level2">
<h2 class="hasAnchor">
<a href="#reference-links" class="anchor"></a>Reference Links</h2>
<p>Below is a list of links to existing Salesforce documentation that provide more detail into how Attachments, Documents, and other blob data are handled via their APIs. As with many functions in {salesforcer}, we have tried to translate these functions exactly as they are described in the Salesforce documentation so that they are flexible enough to handle most all cases that the APIs were intended to support.</p>
<ul>
<li><p><strong>Attachment Object</strong>: <a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_attachment.htm" target="_blank">https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_attachment.htm</a></p></li>
<li><p><strong>Document Object</strong>: <a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_document.htm" target="_blank">https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_document.htm</a></p></li>
<li><p><strong>REST API Upload Attachment</strong>: <a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/dome_sobject_insert_update_blob.htm" target="_blank">https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/dome_sobject_insert_update_blob.htm</a></p></li>
<li><p><strong>Bulk API Upload Attachments</strong>: <a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/binary_intro.htm" target="_blank">https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/binary_intro.htm</a></p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c7d5ea1103660127418415a82a24fc3d',
    indexName: 'salesforcer',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
