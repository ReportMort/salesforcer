<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with the Bulk APIs • salesforcer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Working with the Bulk APIs">
<meta property="og:description" content="salesforcer">
<meta property="og:image" content="https://stevenmmortimer.github.io/salesforcer/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98603021-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-98603021-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">salesforcer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4.999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/supported-queries.html">Supported Queries</a>
    </li>
    <li>
      <a href="../articles/working-with-the-bulk-apis.html">Working with the Bulk APIs</a>
    </li>
    <li>
      <a href="../articles/working-with-attachments.html">Working with Attachments</a>
    </li>
    <li>
      <a href="../articles/working-with-metadata.html">Working with Metadata</a>
    </li>
    <li>
      <a href="../articles/passing-control-args.html">Passing Control Args</a>
    </li>
    <li>
      <a href="../articles/transitioning-from-RForcecom.html">Transitioning from RForcecom</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/StevenMMortimer/salesforcer">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="working-with-the-bulk-apis_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Working with the Bulk APIs</h1>
                        <h4 class="author">Steven M. Mortimer</h4>
            
            <h4 class="date">2020-07-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/StevenMMortimer/salesforcer/blob/master/vignettes/working-with-the-bulk-apis.Rmd"><code>vignettes/working-with-the-bulk-apis.Rmd</code></a></small>
      <div class="hidden name"><code>working-with-the-bulk-apis.Rmd</code></div>

    </div>

    
    
<div id="using-the-bulk-api" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-bulk-api" class="anchor"></a>Using the Bulk API</h2>
<p>First, load the {salesforcer} and <strong>dplyr</strong> packages and login, if needed.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)))
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/StevenMMortimer/salesforcer">salesforcer</a></span>)
<span class="fu"><a href="../reference/sf_auth.html">sf_auth</a></span>()
</pre></div>
<p>For really large inserts, updates, deletes, upserts, and queries you can just add <code>api_type = "Bulk 1.0"</code> to most functions to get the benefits of using the Bulk API instead of the SOAP or REST APIs. The change you have to make from using the REST API to the Bulk 1.0 API as simple as adding <code>api_type="Bulk 1.0"</code> to your function arguments. First, let’s build a <code>tbl_df</code> with two new records to be created.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">n</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="kw">prefix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Bulk-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">100000</span>)), <span class="st">"-"</span>)
<span class="kw">new_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(FirstName = <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Test"</span>, <span class="kw">n</span>),
                       LastName = <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Contact-Create-"</span>, <span class="fl">1</span><span class="op">:</span><span class="kw">n</span>),
                       My_External_Id__c=<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw">prefix</span>, <span class="kw">letters</span>[<span class="fl">1</span><span class="op">:</span><span class="kw">n</span>]))
</pre></div>
<p>There are some differences in the way the REST API returns response information vs.  the Bulk 1.0 API. However, the changes in Salesforce are exactly the same for these two calls.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="co"># REST</span>
<span class="kw">rest_created_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create.html">sf_create</a></span>(<span class="kw">new_contacts</span>[<span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,], 
                                  object_name=<span class="st">"Contact"</span>, 
                                  api_type=<span class="st">"REST"</span>)
<span class="kw">rest_created_records</span>
<span class="co">#&gt; # A tibble: 2 x 2</span>
<span class="co">#&gt;   id                 success</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;  </span>
<span class="co">#&gt; 1 0033s000013XyKjAAK TRUE   </span>
<span class="co">#&gt; 2 0033s000013XyKkAAK TRUE</span>

<span class="co"># Bulk</span>
<span class="kw">bulk_created_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create.html">sf_create</a></span>(<span class="kw">new_contacts</span>[<span class="fl">3</span><span class="op">:</span><span class="fl">4</span>,], 
                                  object_name=<span class="st">"Contact"</span>, 
                                  api_type=<span class="st">"Bulk 1.0"</span>)
<span class="kw">bulk_created_records</span>
<span class="co">#&gt; # A tibble: 2 x 4</span>
<span class="co">#&gt;   Id                 Success Created Error</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;   &lt;lgl&gt;   &lt;lgl&gt;</span>
<span class="co">#&gt; 1 0033s000013XyKoAAK TRUE    TRUE    NA   </span>
<span class="co">#&gt; 2 0033s000013XyKpAAK TRUE    TRUE    NA</span>
</pre></div>
</div>
<div id="a-complete-bulk-api-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#a-complete-bulk-api-workflow" class="anchor"></a>A Complete Bulk API Workflow</h2>
<p>To show a more lengthy example of using the Bulk 1.0 API, below is a workflow of that creates 2 records, queries them, and deletes them. This is just an example. Typically, you’d want to use the Bulk APIs over the REST or SOAP APIs when dealing with over 10,000 records.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">object</span> <span class="op">&lt;-</span> <span class="st">"Contact"</span>
<span class="kw">created_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create.html">sf_create</a></span>(<span class="kw">new_contacts</span>, object_name=<span class="kw">object</span>, api_type=<span class="st">"Bulk 1.0"</span>)
<span class="kw">created_records</span>
<span class="co">#&gt; # A tibble: 2 x 4</span>
<span class="co">#&gt;   Id                 Success Created Error</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;   &lt;lgl&gt;   &lt;lgl&gt;</span>
<span class="co">#&gt; 1 0033s000013XyKyAAK TRUE    TRUE    NA   </span>
<span class="co">#&gt; 2 0033s000013XyKzAAK TRUE    TRUE    NA</span>

<span class="co"># query bulk</span>
<span class="kw">my_soql</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span>(<span class="st">"SELECT Id,
                           FirstName, 
                           LastName
                    FROM Contact 
                    WHERE Id in ('%s')"</span>
                           FirstName, 
                           LastName
                    FROM Contact 
                    WHERE Id in ('%s')", 
                   <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw">created_records</span><span class="op">$</span><span class="kw">Id</span> , collapse=<span class="st">"','"</span>))

<span class="kw">queried_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_query.html">sf_query</a></span>(<span class="kw">my_soql</span>, object_name=<span class="kw">object</span>, api_type=<span class="st">"Bulk 1.0"</span>)
<span class="kw">queried_records</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   Id                 FirstName LastName        </span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;           </span>
<span class="co">#&gt; 1 0033s000013XyKyAAK Test      Contact-Create-1</span>
<span class="co">#&gt; 2 0033s000013XyKzAAK Test      Contact-Create-2</span>

<span class="co"># delete bulk</span>
<span class="kw">deleted_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_delete.html">sf_delete</a></span>(<span class="kw">queried_records</span><span class="op">$</span><span class="kw">Id</span>, object_name=<span class="kw">object</span>, api_type=<span class="st">"Bulk 1.0"</span>)
<span class="kw">deleted_records</span>
<span class="co">#&gt; # A tibble: 2 x 4</span>
<span class="co">#&gt;   Id                 Success Created Error</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;   &lt;lgl&gt;   &lt;lgl&gt;</span>
<span class="co">#&gt; 1 0033s000013XyKyAAK TRUE    FALSE   NA   </span>
<span class="co">#&gt; 2 0033s000013XyKzAAK TRUE    FALSE   NA</span>
</pre></div>
</div>
<div id="query-limitations" class="section level2">
<h2 class="hasAnchor">
<a href="#query-limitations" class="anchor"></a>Query Limitations</h2>
<p>There is one limitation to Bulk queries is that it does not support the following operations or structures of SOQL:</p>
<ul>
<li>COUNT</li>
<li>ROLLUP</li>
<li>SUM</li>
<li>GROUP BY CUBE</li>
<li>OFFSET</li>
<li>Nested SOQL queries</li>
<li>Relationship fields</li>
<li>Compound address fields</li>
<li>Compound geolocation fields</li>
</ul>
</div>
<div id="using-the-bulk-2-0-api" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-bulk-2-0-api" class="anchor"></a>Using the Bulk 2.0 API</h2>
<p>Salesforce has more recently introduced the Bulk 2.0 API which is supposed to be faster and have a more consistent JSON/REST based API than the Bulk 1.0 API. In some cases I have noticed that the ordering of the result records will differ from the order of the input data because the data is batched and processed asynchronously. by Salesforce instead of R. However, The Bulk 2.0 API returns every single field that was included in the call so if you have an identifying key your dataset, then it should not be a problem to join on that key with your original data to bring in the newly assigned Salesforce Id that is generated when the record was created in Salesforce. However, I have find it just seems wasteful to transfer all of the field information back after the query and have not found a significant performance improvement between the Bulk 1.0 and Bulk 2.0. Finally, note that the status field names (“Success”, “Created”, “Error”) are different from the Bulk 2.0 API.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">n</span> <span class="op">&lt;-</span> <span class="fl">20</span>
<span class="kw">prefix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Bulk-"</span>, <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span>(<span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">100000</span>)), <span class="st">"-"</span>)
<span class="kw">new_contacts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(FirstName = <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="st">"Test"</span>, <span class="kw">n</span>),
                       LastName = <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Contact-Create-"</span>, <span class="fl">1</span><span class="op">:</span><span class="kw">n</span>),
                       test_number__c = <span class="fl">1</span><span class="op">:</span><span class="kw">n</span>,
                       My_External_Id__c=<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw">prefix</span>, <span class="kw">letters</span>[<span class="fl">1</span><span class="op">:</span><span class="kw">n</span>]))

<span class="kw">created_records_v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create.html">sf_create</a></span>(<span class="kw">new_contacts</span>[<span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,], 
                                object_name = <span class="st">"Contact"</span>, 
                                api_type = <span class="st">"Bulk 1.0"</span>)
<span class="kw">created_records_v1</span>
<span class="co">#&gt; # A tibble: 10 x 4</span>
<span class="co">#&gt;   Id                 Success Created Error</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;lgl&gt;   &lt;lgl&gt;   &lt;lgl&gt;</span>
<span class="co">#&gt; 1 0033s000013XyLDAA0 TRUE    TRUE    NA   </span>
<span class="co">#&gt; 2 0033s000013XyLEAA0 TRUE    TRUE    NA   </span>
<span class="co">#&gt; 3 0033s000013XyLFAA0 TRUE    TRUE    NA   </span>
<span class="co">#&gt; 4 0033s000013XyLGAA0 TRUE    TRUE    NA   </span>
<span class="co">#&gt; 5 0033s000013XyLHAA0 TRUE    TRUE    NA   </span>
<span class="co">#&gt; # … with 5 more rows</span>

<span class="kw">created_records_v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sf_create.html">sf_create</a></span>(<span class="kw">new_contacts</span>[<span class="fl">11</span><span class="op">:</span><span class="fl">20</span>,],
                                object_name = <span class="st">"Contact"</span>, 
                                api_type = <span class="st">"Bulk 2.0"</span>)
<span class="kw">created_records_v2</span>
<span class="co">#&gt; # A tibble: 10 x 7</span>
<span class="co">#&gt;   sf__Id sf__Created sf__Error FirstName LastName My_External_Id_…</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;lgl&gt;       &lt;lgl&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;           </span>
<span class="co">#&gt; 1 0033s… TRUE        NA        Test      Contact… Bulk-81819-k    </span>
<span class="co">#&gt; 2 0033s… TRUE        NA        Test      Contact… Bulk-81819-l    </span>
<span class="co">#&gt; 3 0033s… TRUE        NA        Test      Contact… Bulk-81819-m    </span>
<span class="co">#&gt; 4 0033s… TRUE        NA        Test      Contact… Bulk-81819-n    </span>
<span class="co">#&gt; 5 0033s… TRUE        NA        Test      Contact… Bulk-81819-o    </span>
<span class="co">#&gt; # … with 5 more rows, and 1 more variable: test_number__c &lt;dbl&gt;</span>
</pre></div>
</div>
<div id="performance-benchmarks-for-bulk-queries" class="section level2">
<h2 class="hasAnchor">
<a href="#performance-benchmarks-for-bulk-queries" class="anchor"></a>Performance Benchmarks for Bulk Queries</h2>
<p>Below is a simple performance benchmark between the Bulk 1.0 and Bulk 2.0 APIs for a small query. In general, the Bulk 2.0 should be faster. One potential reason for the implementation in R to be faster is that the entire recordset is parsed at once from a downloaded CSV of the results when using the Bulk 1.0 API. The Bulk 2.0 retrieves the same data in large batches (typically 50,000 records at a time). I would encourage users to experiment to see what works best in their Salesforce Org.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">soql</span> <span class="op">&lt;-</span> <span class="st">"SELECT Id, Name FROM Contact"</span>
<span class="kw">bulk1_query</span> <span class="op">&lt;-</span> <span class="fu">function</span>(){<span class="fu"><a href="../reference/sf_query.html">sf_query</a></span>(<span class="kw">soql</span>, <span class="st">"Contact"</span>, api_type=<span class="st">"Bulk 1.0"</span>)}
<span class="kw">bulk2_query</span> <span class="op">&lt;-</span> <span class="fu">function</span>(){<span class="fu"><a href="../reference/sf_query.html">sf_query</a></span>(<span class="kw">soql</span>, api_type=<span class="st">"Bulk 2.0"</span>)} <span class="co"># Bulk 2.0 doesn't need object name</span>

<span class="kw">res</span> <span class="op">&lt;-</span> <span class="kw">microbenchmark</span>::<span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span>(
  <span class="fu">bulk1_query</span>(),
  <span class="fu">bulk2_query</span>(), 
  times=<span class="fl">8</span>
)
<span class="kw">res</span>
<span class="co">#&gt; Unit: seconds</span>
<span class="co">#&gt;           expr      min       lq     mean   median       uq      max neval</span>
<span class="co">#&gt;  bulk1_query() 7.487621 7.632726 7.779368 7.737823 7.944456 8.117313     8</span>
<span class="co">#&gt;  bulk2_query() 6.658682 6.673749 6.796066 6.795567 6.819280 7.132658     8</span>

<span class="kw">ggplot2</span>::<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(<span class="kw">res</span>) <span class="op">+</span> 
  <span class="kw">ggplot2</span>::<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(name=<span class="st">"Time [seconds]"</span>, n.breaks=<span class="fl">6</span>)
</pre></div>
<p><img src="working-with-the-bulk-apis_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Steven M. Mortimer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c7d5ea1103660127418415a82a24fc3d',
    indexName: 'salesforcer',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
